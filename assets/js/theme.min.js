document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("hero-bg-wrap");if(!e)return;if(window.matchMedia("(prefers-reduced-motion: no-preference)").matches){let t=0,n=!1;const s=()=>{t=window.scrollY,n||(window.requestAnimationFrame(()=>{e.style.transform=`translateY(${.15*t}px)`,n=!1}),n=!0)};s(),window.addEventListener("scroll",s,{passive:!0})}}),window.addEventListener("load",()=>{document.body.classList.add("diurnalis-ready")}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("recent-posts-slider"),t=document.getElementById("recent-posts-prev"),n=document.getElementById("recent-posts-next");if(!e||!t||!n)return;let s=1;let o=!1;n.addEventListener("click",()=>{e.scrollBy({left:e.clientWidth,behavior:"smooth"}),e.scrollWidth-e.scrollLeft-e.clientWidth<50&&async function(){if(!o){o=!0;try{const t=await fetch(`/wp-json/wp/v2/posts?_embed&per_page=3&page=${s+1}`);if(!t.ok)return;const n=await t.json();if(!Array.isArray(n)||0===n.length)return;s+=1;for(const t of n){const n=document.createElement("article");n.className="flex-none w-80 snap-center flex flex-col items-center text-center";const s=t._embedded&&t._embedded["wp:featuredmedia"]?t._embedded["wp:featuredmedia"][0].source_url:"";n.innerHTML=`\n          <a href="${t.link}" class="block">\n            ${s?`<img src="${s}" alt="" class="w-full h-40 object-cover rounded shadow">`:""}\n            <h3 class="mt-4 text-lg font-semibold">${t.title.rendered}</h3>\n            <time datetime="${t.date}" class="text-sm text-neutral-500">${new Date(t.date).toLocaleDateString()}</time>\n          </a>`,e.appendChild(n)}}catch(e){console.error(e)}finally{o=!1}}}()}),t.addEventListener("click",()=>{e.scrollBy({left:-e.clientWidth,behavior:"smooth"})});let r=0;e.addEventListener("touchstart",e=>{r=e.touches[0].clientX},{passive:!0}),e.addEventListener("touchend",e=>{const s=e.changedTouches[0].clientX-r;s>50&&t.click(),s<-50&&n.click()})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("search-field"),t=document.getElementById("search-submit"),n=document.getElementById("search-warning");if(e){const r=e.getAttribute("placeholder")||"";function s(){e.placeholder="";let t=0;const n=setInterval(()=>{e.placeholder=r.slice(0,t+1),t+=1,t>=r.length&&clearInterval(n)},80)}s(),setInterval(s,3e4)}t&&t.addEventListener("click",t=>{e&&""===e.value.trim()&&(t.preventDefault(),n&&n.classList.remove("hidden"))});const o=()=>n&&n.classList.add("hidden");document.addEventListener("click",o),document.addEventListener("scroll",o,{passive:!0}),document.querySelectorAll(".ag-interactive").forEach(e=>{const t=e.querySelector(".ag-icon");if(!t)return;let n,s=!1,o=1.5;const r=()=>{s=!1,clearTimeout(n),t.classList.remove("ag-spin","ag-spin-once"),t.style.removeProperty("--ag-spin-duration")},c=()=>{if(!s)return;t.classList.remove("ag-spin-once"),t.classList.add("ag-spin"),t.style.setProperty("--ag-spin-duration",o+"s");const e=()=>{s&&(o=Math.max(.2,o-.3),t.style.setProperty("--ag-spin-duration",o+"s"),o>.2&&(n=setTimeout(e,200)))};e()},d=()=>{s=!0,o=1.5,t.classList.add("ag-spin-once"),n=setTimeout(c,1400)};e.addEventListener("mousedown",d),e.addEventListener("touchstart",d,{passive:!0}),e.addEventListener("mouseup",r),e.addEventListener("mouseleave",r),e.addEventListener("touchend",r)})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("rock-art-card");if(!e)return;const t=Array.from(e.querySelectorAll(".rock-art-img"));let n=0,s=0;function o(){const e=0===n?0===s?1:2:(s=0===s?1:0,0);t[n].classList.remove("active"),t[e].classList.add("active"),n=e}function r(){e.classList.add("rock-wiggle"),setTimeout(()=>{e.classList.remove("rock-wiggle"),e.classList.add("rock-bounce"),o(),setTimeout(()=>{e.classList.remove("rock-bounce")},600)},200)}t[n].classList.add("active"),setTimeout(()=>{r(),setInterval(r,5800)},5e3)}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-gallery, .gallery").forEach(e=>{e.querySelectorAll("a").forEach(e=>{const t=e.querySelector("figure");if(t&&t.parentElement===e){const n=document.createElement("div");n.classList.add("image-link-wrapper"),e.appendChild(n),n.appendChild(t)}})})});