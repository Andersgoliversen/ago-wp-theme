window.addEventListener("load",(()=>{document.body.classList.add("diurnalis-ready")})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".theme-toggle").forEach((e=>{e.addEventListener("click",(()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("recent-posts-slider"),t=document.getElementById("recent-posts-prev"),n=document.getElementById("recent-posts-next");if(!e||!t||!n)return;let s=1;let c=!1;n.addEventListener("click",(()=>{e.scrollBy({left:e.clientWidth,behavior:"smooth"}),e.scrollWidth-e.scrollLeft-e.clientWidth<50&&async function(){if(!c){c=!0;try{const t=await fetch(`/wp-json/wp/v2/posts?_embed&per_page=3&page=${s+1}`);if(!t.ok)return;const n=await t.json();if(!Array.isArray(n)||0===n.length)return;s+=1;for(const t of n){const n=document.createElement("article");n.className="flex-none w-80 snap-center flex flex-col items-center text-center";const s=t._embedded&&t._embedded["wp:featuredmedia"]?t._embedded["wp:featuredmedia"][0].source_url:"",c=t.title.rendered||"Blog post image";n.innerHTML=`\n          <a href="${t.link}" class="block">\n            ${s?`<img src="${s}" alt="${c}" class="w-full h-40 object-cover rounded shadow" loading="lazy">`:""}\n            <h3 class="mt-4 text-lg font-semibold">${t.title.rendered}</h3>\n            <time datetime="${t.date}" class="text-sm text-neutral-500">${new Date(t.date).toLocaleDateString()}</time>\n          </a>`,e.appendChild(n)}}catch(e){console.error(e)}finally{c=!1}}}()})),t.addEventListener("click",(()=>{e.scrollBy({left:-e.clientWidth,behavior:"smooth"})}));let o=0;e.addEventListener("touchstart",(e=>{o=e.touches[0].clientX}),{passive:!0}),e.addEventListener("touchend",(e=>{const s=e.changedTouches[0].clientX-o;s>50&&t.click(),s<-50&&n.click()}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("search-field"),t=document.getElementById("search-submit"),n=document.getElementById("search-warning");if(e){const o=e.getAttribute("placeholder")||"";function s(){e.placeholder="";let t=0;const n=setInterval((()=>{e.placeholder=o.slice(0,t+1),t+=1,t>=o.length&&clearInterval(n)}),80)}s(),setInterval(s,3e4)}t&&t.addEventListener("click",(t=>{e&&""===e.value.trim()&&(t.preventDefault(),n&&n.classList.remove("hidden"))}));const c=()=>n&&n.classList.add("hidden");document.addEventListener("click",c),document.addEventListener("scroll",c,{passive:!0}),document.querySelectorAll(".ag-interactive").forEach((e=>{const t=e.querySelector(".ag-icon");if(!t)return;let n,s=!1,c=1.5;const o=()=>{s=!1,clearTimeout(n),t.classList.remove("ag-spin","ag-spin-once"),t.style.removeProperty("--ag-spin-duration")},d=()=>{if(!s)return;t.classList.remove("ag-spin-once"),t.classList.add("ag-spin"),t.style.setProperty("--ag-spin-duration",c+"s");const e=()=>{s&&(c=Math.max(.2,c-.3),t.style.setProperty("--ag-spin-duration",c+"s"),c>.2&&(n=setTimeout(e,200)))};e()},a=()=>{s=!0,c=1.5,t.classList.add("ag-spin-once"),n=setTimeout(d,1400)};e.addEventListener("mousedown",a),e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",o),e.addEventListener("touchend",o)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("rock-art-card");if(!e)return;const t=Array.from(e.querySelectorAll(".rock-art-img"));let n=0,s=0;function c(){const e=0===n?0===s?1:2:(s=0===s?1:0,0);t[n].classList.remove("active"),t[e].classList.add("active"),n=e}function o(){e.classList.add("rock-wiggle"),setTimeout((()=>{e.classList.remove("rock-wiggle"),e.classList.add("rock-bounce"),c(),setTimeout((()=>{e.classList.remove("rock-bounce")}),600)}),200)}t[n].classList.add("active"),setTimeout((()=>{o(),setInterval(o,5800)}),5e3)}));