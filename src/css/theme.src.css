@tailwind base;
@tailwind components;
@tailwind utilities;

/* -----------------------------------------------------------
   Custom utilities & animations
   ----------------------------------------------------------- */
@layer utilities {

  /* ── Text fade-in-up ─────────────────────────────────────── */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: none; }
  }

  .animate-fadeUp {
    animation: fadeUp 0.8s ease-out forwards;
  }

  /* ── Icon animations ───────────────────────────────────── */
  @keyframes ag-spin {
    to { transform: rotate(360deg); }
  }

  .ag-spin {
    animation: ag-spin var(--ag-spin-duration,0.4s) linear infinite;
  }

  @keyframes ag-spin-once {
    to { transform: rotate(360deg); }
  }

  .ag-spin-once {
    animation: ag-spin-once 0.4s ease-in-out forwards;
  }

  @keyframes ag-wiggle {
    0%,100% { transform: rotate(0deg); }
    25%     { transform: rotate(-12deg); }
    75%     { transform: rotate(12deg); }
  }

  .ag-interactive:hover .ag-icon:not(.ag-spin):not(.ag-spin-once) {
    animation: ag-wiggle 0.6s ease-in-out infinite;
  }
}

/* -----------------------------------------------------------
   Hero-section cross-fade
   (two independent timelines so first image is never grey)
   ----------------------------------------------------------- */
@keyframes heroFade1 {          /* satellite image – ID 3512 */
  0%,45%  { opacity: 1; }
  55%,90% { opacity: 0; }
  100%    { opacity: 1; }
}
@keyframes heroFade2 {          /* infrared image – ID 3513 */
  0%,45%  { opacity: 0; }
  55%,90% { opacity: 1; }
  100%    { opacity: 0; }
}

#hero-img-1 { animation: heroFade1 32s ease-in-out infinite; }
#hero-img-2 { animation: heroFade2 32s ease-in-out infinite; }

/* -----------------------------------------------------------
   Gallery card vertical pan & cross-fade
   ----------------------------------------------------------- */
@keyframes galleryPan1 {
  0%   { opacity: 1; object-position: center top; }
  45%  { opacity: 1; object-position: center bottom; }
  55%  { opacity: 0; object-position: center bottom; }
  90%  { opacity: 0; object-position: center top; }
  100% { opacity: 1; object-position: center top; }
}

@keyframes galleryPan2 {
  0%   { opacity: 0; object-position: center top; }
  45%  { opacity: 0; object-position: center top; }
  55%  { opacity: 1; object-position: center top; }
  90%  { opacity: 1; object-position: center bottom; }
  100% { opacity: 0; object-position: center bottom; }
}

#gallery-img-1 { animation: galleryPan1 20s ease-in-out infinite; }
#gallery-img-2 { animation: galleryPan2 20s ease-in-out infinite; }

/* -----------------------------------------------------------
   Diurnalis card zoom & cross-fade animation

   Overall Logic:
   - A sequence of images fades and zooms, creating a continuous loop.
   - Each image uses the same 24-second `diurnalisSeq` animation definition.
   - `animation-delay` staggers the start of this 24s animation for each image,
     creating the sequence.
   - Animations are paused by default and start when the `body` tag gets
     the class `diurnalis-ready`.
   ----------------------------------------------------------- */

/*
 * Defines the animation for a single image in the Diurnalis sequence.
 * Each image's animation cycle is 24 seconds long, matching the overall sequence duration.
 *
 * Keyframe percentages:
 * - 0%-5% (0s to 1.2s): Image fades in and establishes initial zoom scale.
 *   Zoom scale is defined by `--zoom-start` (or fallback 0.7).
 * - 5%-25% (1.2s to 6s): Image is fully opaque and visible.
 *   Zoom transition occurs towards `--zoom-end` (or fallback 1.4).
 * - 25%-30% (6s to 7.2s): Image fades out. Zoom is at its end state.
 *   The 25% mark (6s) is critical for handoff: as this image starts fading out,
 *   the next image in sequence (delayed appropriately) starts fading in.
 * - 30%-100% (7.2s to 24s): Image remains transparent. This ensures it's hidden
 *   outside its active "slot" in the sequence.
 */
@keyframes diurnalisSeq {
  0%   { opacity: 0;   transform: scale(var(--zoom-start,0.7)); } /* Start of image's cycle: invisible, initial zoom */
  5%   { opacity: 1;   transform: scale(var(--zoom-start,0.7)); } /* Faded in, holds initial zoom */
  25%  { opacity: 1;   transform: scale(var(--zoom-end,1.4)); }   /* Fully visible, zoom reaches end state, about to fade out */
  30%  { opacity: 0;   transform: scale(var(--zoom-end,1.4)); }   /* Faded out, maintains end zoom state */
  100% { opacity: 0; }                                          /* Remainder of 24s cycle: stays transparent */
}

/* Base styles for all images in the Diurnalis sequence */
.diurnalis-img {
  opacity: 0; /* Default state: hidden. Overridden by #diurnalis-img-1 for initial view */
  animation: diurnalisSeq 24s ease-in-out infinite; /* Common animation properties */
  animation-play-state: paused; /* Animation is paused until explicitly started */
}

/* Specific styles for each image in the sequence */
/* #diurnalis-img-1: First image in sequence */
#diurnalis-img-1 {
  opacity: 1; /* Visible on page load, before animations start */
  --zoom-start: 1; /* Zooms IN from 1 to 1.2 */
  --zoom-end: 1.2;
  animation-delay: 0s; /* Starts its 24s animation cycle immediately */
}
/* #diurnalis-img-2: Second image in sequence (e.g., ID 2955) */
#diurnalis-img-2 {
  --zoom-start: 1.2; /* Zooms OUT from 1.2 to 1 */
  --zoom-end: 1;
  animation-delay: 6s; /* Starts its 24s animation 6s into the main 24s cycle timeline */
                       /* This aligns with #diurnalis-img-1 starting its fade-out (at its 25% mark) */
}
/* #diurnalis-img-3: Third image in sequence (e.g., ID 2957) */
#diurnalis-img-3 {
  --zoom-start: 1; /* Zooms IN from 1 to 1.2 */
  --zoom-end: 1.2;
  animation-delay: 12s; /* Starts 12s into the main timeline (6s after #diurnalis-img-2) */
}
/* #diurnalis-img-4: Fourth image in sequence (e.g., ID 2949) */
#diurnalis-img-4 {
  --zoom-start: 1.2; /* Zooms OUT from 1.2 to 1 */
  --zoom-end: 1;
  animation-delay: 18s; /* Starts 18s into the main timeline (6s after #diurnalis-img-3) */
                        /* This image will cross-fade with #diurnalis-img-1 at the 24s wrap-around point */
}

/* Triggers the Diurnalis animations to start playing */
body.diurnalis-ready .diurnalis-img {
  animation-play-state: running; /* Changes from 'paused' to 'running' */
}

/* Global link style */
@layer base {
  a {
    @apply underline decoration-neutral-400 text-neutral-800 transition-transform duration-150 hover:scale-105 hover:text-neutral-600 hover:decoration-neutral-600;
    /* Darken and shrink slightly while the link is actively clicked */
    @apply active:text-neutral-950 active:scale-95;
  }
}

@layer base {
  figcaption, .wp-caption-text {
    @apply text-sm text-neutral-500;
  }
}

/* -----------------------------------------------------------
   Related posts styling
   ----------------------------------------------------------- */
@layer components {
  /* Smaller thumbnails with cropping for Jetpack related posts */
  .jp-relatedposts-post img {
    @apply w-20 h-20 object-cover object-center mx-auto;
  }

  /* Slightly larger titles */
  .jp-relatedposts-post-title {
    @apply text-lg;
  }
}

@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}
